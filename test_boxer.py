"""
A small test to establish whether the parser works with tested input.
"""

from calling_boxer import parse, box


if __name__ == "__main__":
    parsed = parse("The man in the car saw the dog run across the street .\n He gave her dog biscuits .") # C&C/Boxer will only parse first sentence!
    #print(parsed)
    result = box(parsed)
    goal = b'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE xdrs-output SYSTEM "src/data/boxer/xdrs.dtd">\n<xdrs-output version="boxer v1.00 (unix build on 23 March 2019, 14:15:05)">\n<!-- The man in the car saw the dog run across the street . --> \n\n<xdrs xml:id="xdrs1">\n <taggedtokens>\n  <tagtoken xml:id="i1001">\n   <tags>\n     <tag type="tok">The</tag>\n     <tag type="pos">DT</tag>\n     <tag type="lemma">the</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1002">\n   <tags>\n     <tag type="tok">man</tag>\n     <tag type="pos">NN</tag>\n     <tag type="lemma">man</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1003">\n   <tags>\n     <tag type="tok">in</tag>\n     <tag type="pos">IN</tag>\n     <tag type="lemma">in</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1004">\n   <tags>\n     <tag type="tok">the</tag>\n     <tag type="pos">DT</tag>\n     <tag type="lemma">the</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1005">\n   <tags>\n     <tag type="tok">car</tag>\n     <tag type="pos">NN</tag>\n     <tag type="lemma">car</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1006">\n   <tags>\n     <tag type="tok">saw</tag>\n     <tag type="pos">VBD</tag>\n     <tag type="lemma">see</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1007">\n   <tags>\n     <tag type="tok">the</tag>\n     <tag type="pos">DT</tag>\n     <tag type="lemma">the</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1008">\n   <tags>\n     <tag type="tok">dog</tag>\n     <tag type="pos">NN</tag>\n     <tag type="lemma">dog</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1009">\n   <tags>\n     <tag type="tok">run</tag>\n     <tag type="pos">NN</tag>\n     <tag type="lemma">run</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1010">\n   <tags>\n     <tag type="tok">across</tag>\n     <tag type="pos">IN</tag>\n     <tag type="lemma">across</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1011">\n   <tags>\n     <tag type="tok">the</tag>\n     <tag type="pos">DT</tag>\n     <tag type="lemma">the</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1012">\n   <tags>\n     <tag type="tok">street</tag>\n     <tag type="pos">NN</tag>\n     <tag type="lemma">street</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n  <tagtoken xml:id="i1013">\n   <tags>\n     <tag type="tok">.</tag>\n     <tag type="pos">.</tag>\n     <tag type="lemma">.</tag>\n     <tag type="namex">O</tag>\n   </tags>\n  </tagtoken>\n </taggedtokens>\n <merge>\n  <drs type="normal" label="l">\n   <domain>\n    <dr label="l" name="x5">\n    <indexlist>\n    <index pos="11">i1011</index>\n    </indexlist>\n    </dr>\n    <dr label="l" name="x4">\n    <indexlist>\n    </indexlist>\n    </dr>\n    <dr label="l" name="x3">\n    <indexlist>\n    <index pos="7">i1007</index>\n    </indexlist>\n    </dr>\n    <dr label="l" name="x2">\n    <indexlist>\n    <index pos="4">i1004</index>\n    </indexlist>\n    </dr>\n    <dr label="l" name="x1">\n    <indexlist>\n    <index pos="1">i1001</index>\n    </indexlist>\n    </dr>\n   </domain>\n   <conds>\n    <cond label="l">\n     <pred arg="x5" symbol="street" type="n" sense="0">\n     <indexlist>\n     <index pos="12">i1012</index>\n     </indexlist>\n     </pred>\n    </cond>\n    <cond label="l">\n     <pred arg="x3" symbol="run" type="n" sense="0">\n     <indexlist>\n     <index pos="9">i1009</index>\n     </indexlist>\n     </pred>\n    </cond>\n    <cond label="l">\n     <rel arg1="x3" arg2="x4" symbol="of" sense="0">\n     <indexlist>\n     </indexlist>\n     </rel>\n    </cond>\n    <cond label="l">\n     <pred arg="x4" symbol="dog" type="n" sense="0">\n     <indexlist>\n     <index pos="8">i1008</index>\n     </indexlist>\n     </pred>\n    </cond>\n    <cond label="l">\n     <pred arg="x2" symbol="car" type="n" sense="0">\n     <indexlist>\n     <index pos="5">i1005</index>\n     </indexlist>\n     </pred>\n    </cond>\n    <cond label="l">\n     <pred arg="x1" symbol="man" type="n" sense="0">\n     <indexlist>\n     <index pos="2">i1002</index>\n     </indexlist>\n     </pred>\n    </cond>\n   </conds>\n  </drs>\n  <drs type="normal" label="l">\n   <domain>\n    <dr label="l" name="e1">\n    <indexlist>\n    </indexlist>\n    </dr>\n   </domain>\n   <conds>\n    <cond label="l">\n     <rel arg1="e1" arg2="x3" symbol="Theme" sense="0">\n     <indexlist>\n     </indexlist>\n     </rel>\n    </cond>\n    <cond label="l">\n     <rel arg1="e1" arg2="x1" symbol="Agent" sense="0">\n     <indexlist>\n     </indexlist>\n     </rel>\n    </cond>\n    <cond label="l">\n     <pred arg="e1" symbol="see" type="v" sense="0">\n     <indexlist>\n     <index pos="6">i1006</index>\n     </indexlist>\n     </pred>\n    </cond>\n    <cond label="l">\n     <rel arg1="x3" arg2="x5" symbol="across" sense="0">\n     <indexlist>\n     <index pos="10">i1010</index>\n     </indexlist>\n     </rel>\n    </cond>\n    <cond label="l">\n     <rel arg1="x1" arg2="x2" symbol="in" sense="0">\n     <indexlist>\n     <index pos="3">i1003</index>\n     </indexlist>\n     </rel>\n    </cond>\n   </conds>\n  </drs>\n </merge>\n</xdrs>\n</xdrs-output>\n'

    if result == goal:
        print("Test successfully completed. C&C and Boxer work")
    else:
        print("Test failed. Result of test:")
        print(result)
